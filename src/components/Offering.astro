---
import { fetchApi } from '../lib/strapi';

interface OfferItem {
  title: string;
  description: string;
  icon: string;
  linkText: string;
  link: string;
}

let offers;
try {
  offers = await fetchApi<OfferItem[]>({ 
    endpoint: 'offers', 
    query: '' 
  });
} catch (e) {
  offers = [
    {
      title: "Reformer Pilates",
      description: "Wykorzystaj opór maszyny reformer, aby wydłużyć, wzmocnić i wymodelować całe ciało.",
      icon: "self_improvement",
      linkText: "Szczegóły",
      link: "#"
    },
    {
      title: "Mat Pilates",
      description: "Powrót do fundamentów. Wykorzystaj ciężar własnego ciała i małe akcesoria dla wymagającego treningu core.",
      icon: "spa",
      linkText: "Szczegóły",
      link: "#"
    },
    {
      title: "Trening Indywidualny",
      description: "Personalna uwaga dostosowana w całości do Twoich celów fitness, potrzeb rehabilitacyjnych i grafiku.",
      icon: "accessibility_new",
      linkText: "Szczegóły",
      link: "#"
    }
  ];
}
---

<section class="py-24 bg-surface-light dark:bg-surface-dark transition-colors duration-300" id="oferta">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-display text-gray-900 dark:text-white mb-4">Nasza Oferta</h2>
            <p class="text-gray-500 dark:text-gray-400 font-light max-w-2xl mx-auto">Kameralne grupy i sesje indywidualne dostosowane do potrzeb Twojego ciała.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {offers.map((offer) => (
                <div class="group bg-background-light dark:bg-background-dark p-8 border border-gray-100 dark:border-gray-700 hover:border-primary dark:hover:border-primary transition-all duration-300">
                    <div class="w-12 h-12 bg-primary/10 flex items-center justify-center rounded-full mb-6">
                        <span class="material-icons-outlined text-primary">{offer.icon}</span>
                    </div>
                    <h4 class="text-xl font-medium text-gray-900 dark:text-white mb-3">{offer.title}</h4>
                    <p class="text-gray-500 dark:text-gray-400 font-light text-sm leading-relaxed mb-6">
                        {offer.description}
                    </p>
                    <a class="text-primary text-xs uppercase tracking-widest font-medium border-b border-transparent group-hover:border-primary transition-all pb-1" href={offer.link}>{offer.linkText}</a>
                </div>
            ))}
        </div>
    </div>
</section>
